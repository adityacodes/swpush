<!DOCTYPE html>
<html>
<head>
	<title>Service Worker Learning</title>
</head>
<body>

	<button onclick="subscribe()">Click to Know</button>


	<script>
		addEventListener('load', async () => {
			let sw = await navigator.serviceWorker.register('./sw.js');
			console.log(sw);
		})

		async function subscribe(){
			let sw = navigator.serviceWorker.ready;
			sw.then( function(serviceWorkerReg) {
				serviceWorkerReg.pushManager.subscribe({
					userVisibleOnly: true,
					applicationServerKey: 'BNed_tsYMGLvqpver8siEEWF6mdJrfJJfZfy7SpE7ibjnpmdpEeagDQweTDs5pMqlrXDjLiDJb8WAV3AQu4ogqI'
				}).then(function(ps){
					console.log(JSON.stringify(ps));
				})
			});

		}


	</script>
</body>
</html>