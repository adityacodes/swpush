<!DOCTYPE html>
<html>
<head>
	<title>Service Worker Learning</title>
</head>
<body>

	<button onclick="subscribe()">Click to Know</button>


	<script>
		addEventListener('load', async () => {
			let sw = await navigator.serviceWorker.register('./sw.js');
			console.log(sw);
		})

		async function subscribe(){
			let sw = navigator.serviceWorker.ready;
			let push = await sw.pushManager.subscribe({
				userVisibleOnly: true,
				applicationServerKey: 'Todo!'
			})

			console.log(JSON.stringify(push));
		}


	</script>
</body>
</html>